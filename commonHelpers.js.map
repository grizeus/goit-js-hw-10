{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\"use strict\";\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"../css/custom-flatpickr.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport errSvg from \"../img/error.svg\";\n\nconst countBtn = document.querySelector(\"button[data-start]\");\nconst datePicker = document.querySelector(\"input#datetime-picker\");\n\nconst secondsVal = document.querySelector(\".value[data-seconds]\");\nconst minutesVal = document.querySelector(\".value[data-minutes]\");\nconst hoursVal = document.querySelector(\".value[data-hours]\");\nconst daysVal = document.querySelector(\".value[data-days]\");\n\n\nfunction convertMs(ms) {\n  const SECOND = 1000;\n  const MINUTE = SECOND * 60;\n  const HOUR = MINUTE * 60;\n  const DAY = HOUR * 24;\n\n  const seconds = Math.floor((((ms % DAY) % HOUR) % MINUTE) / SECOND);\n  const minutes = Math.floor(((ms % DAY) % HOUR) / MINUTE);\n  const hours = Math.floor((ms % DAY) / HOUR);\n  const days = Math.floor(ms / DAY);\n\n  return {\n    days: days,\n    hours: hours,\n    minutes: minutes,\n    seconds: seconds,\n  };\n}\n\nconst addLeadingZero = num => {\n  return num.toString().padStart(2, \"0\");\n};\n\nfunction countingloop(e) {\n  e.target.disabled = true;\n  datePicker.disabled = true;\n\n  const interval = setInterval(() => {\n    const diff = userSelectedDate - Date.now();\n\n    if (diff <= 0) {\n      clearInterval(interval);\n      datePicker.disabled = false;\n\n      return;\n    }\n\n    const time = convertMs(diff);\n\n    daysVal.innerText = addLeadingZero(time.days);\n    hoursVal.innerText = addLeadingZero(time.hours);\n    minutesVal.innerText = addLeadingZero(time.minutes);\n    secondsVal.innerText = addLeadingZero(time.seconds);\n  }, 1000);\n}\n\nlet userSelectedDate = 0;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  locale: {\n    firstDayOfWeek: 1,\n  },\n  onClose(selectedDates) {\n    const diff = selectedDates[0] - Date.now();\n\n    if (diff > 0) {\n      countBtn.disabled = false;\n      userSelectedDate = selectedDates[0];\n    } else {\n      countBtn.disabled = true;\n      iziToast.error({\n        title: \"Error\",\n        titleColor: \"#fff\",\n        titleSize: \"16px\",\n        titleLineHeight: 1.5,\n        message: \"Please choose a date in the future\",\n        messageSize: \"16px\",\n        messageLineHeight: 1.5,\n        messageColor: \"#fff\",\n        backgroundColor: \"#ef4040\",\n        position: \"topRight\",\n        closeOnEscape: true,\n        icon: \"error\",\n        iconUrl: errSvg,\n        timeout: 3000,\n        theme: \"dark\",\n      });\n    }\n  },\n};\n\nflatpickr(datePicker, options);\n\ncountBtn.addEventListener(\"click\", countingloop);"],"names":["countBtn","datePicker","secondsVal","minutesVal","hoursVal","daysVal","convertMs","ms","seconds","minutes","hours","addLeadingZero","num","countingloop","interval","diff","userSelectedDate","time","options","selectedDates","iziToast","errSvg","flatpickr"],"mappings":"qIASA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAa,SAAS,cAAc,uBAAuB,EAE3DC,EAAa,SAAS,cAAc,sBAAsB,EAC1DC,EAAa,SAAS,cAAc,sBAAsB,EAC1DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAU,SAAS,cAAc,mBAAmB,EAG1D,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAU,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,EAC5DE,EAAU,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,EACjDG,EAAQ,KAAK,MAAOH,EAAK,MAAO,IAAI,EAG1C,MAAO,CACL,KAHW,KAAK,MAAMA,EAAK,KAAG,EAI9B,MAAOG,EACP,QAASD,EACT,QAASD,CACb,CACA,CAEA,MAAMG,EAAiBC,GACdA,EAAI,SAAU,EAAC,SAAS,EAAG,GAAG,EAGvC,SAASC,EAAa,EAAG,CACvB,EAAE,OAAO,SAAW,GACpBZ,EAAW,SAAW,GAEtB,MAAMa,EAAW,YAAY,IAAM,CACjC,MAAMC,EAAOC,EAAmB,KAAK,IAAG,EAExC,GAAID,GAAQ,EAAG,CACb,cAAcD,CAAQ,EACtBb,EAAW,SAAW,GAEtB,MACD,CAED,MAAMgB,EAAOX,EAAUS,CAAI,EAE3BV,EAAQ,UAAYM,EAAeM,EAAK,IAAI,EAC5Cb,EAAS,UAAYO,EAAeM,EAAK,KAAK,EAC9Cd,EAAW,UAAYQ,EAAeM,EAAK,OAAO,EAClDf,EAAW,UAAYS,EAAeM,EAAK,OAAO,CACnD,EAAE,GAAI,CACT,CAEA,IAAID,EAAmB,EAEvB,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,OAAQ,CACN,eAAgB,CACjB,EACD,QAAQC,EAAe,CACRA,EAAc,CAAC,EAAI,KAAK,IAAG,EAE7B,GACTnB,EAAS,SAAW,GACpBgB,EAAmBG,EAAc,CAAC,IAElCnB,EAAS,SAAW,GACpBoB,EAAS,MAAM,CACb,MAAO,QACP,WAAY,OACZ,UAAW,OACX,gBAAiB,IACjB,QAAS,qCACT,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,UACjB,SAAU,WACV,cAAe,GACf,KAAM,QACN,QAASC,EACT,QAAS,IACT,MAAO,MACf,CAAO,EAEJ,CACH,EAEAC,EAAUrB,EAAYiB,CAAO,EAE7BlB,EAAS,iBAAiB,QAASa,CAAY"}